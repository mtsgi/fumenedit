## 譜面フォーマット

> by mtsgi

- 各難易度は「ノーツ(0個以上のノートの集合からなる)」の配列です
- 音符の「位置」とは、楽曲の中で音符が判定ラインに到達するタイミング(時間)のことです
- `info`キーに譜面情報が格納されています

## 音符について

### typeキー

|値|意味|備考|
|---|---|---|
|1|通常ノート||
|2|ロングノート||
|3|左フリック|optionキーで幅を指定|
|4|右フリック||
|5|音札ノート|全難易度で共通位置|
|97|拍子変化|optionキーで拍数を指定|
|98|BPM変化|optionキーでBPM値を指定|
|99|EOF|終了位置。1難易度に1回のみ|

- 今後、種類が増えるときは96,95,94...と追加していきます

### laneキー

|1|2|3|4|5|
|---|---|---|---|---|
|壱|弐|参|肆|伍|

- type:1またはtype:2の時、音符のレーンを整数値で記述します
  - 左から右へ数字が大きくなります
- type:3またはtype:4の時、音符のレーンを整数値で記述します
  - ~~1番レーンと5番レーンは**使用できません**~~
  - 幅オプション(後述)を考慮して自由な位置に音符を配置できます
- type:5の時、**3を記述**します
- 上記に該当しないtypeの場合はlaneキーは使用しません(`-1`とします)

### measureキー

- すべてのtypeの時、音符の位置の小節数を整数値で記述します

### position, splitキー

- すべてのtypeの時、小節内での位置を「position/split」となるよう記述します
  - 「position/split」の値は0以上1未満になるようにします(1.0は、次の小節の0.0です)
  - 小節の頭が0/1、ちょうど真ん中が1/2になります
  - つまり、4分音符のときはsplitが4に、8分音符のときは8になります

### optionキー

- optionキーは**Float型の配列**です。
- ~~type:97の時、["beatchange", "変化後の拍子をn/4拍子の形"]を記述します。~~
  - ~~例えば、3/4拍子ならoptionキーを3、5/8拍子ならoptionキーを2.5とします~~
- ~~type:98の時、["bpmchange", "(変化後のBPM数値)"]を記述します~~
- type:3または4の時、ノートの横幅を変化させたい場合に`[幅]`(レーン1つ分の幅を1とする, Float)を記述します(変化させない場合は`[-1]`とします)
- 上記に該当しないtypeの場合はoptionキーは使用しません(空の配列`[]`とします)

### endキー

- type:2の時、その音符を始点とするロングノーツの終点を表す「ノーツ(1個以上のノートの集合からなる)」の配列を記述します
  - 終点ノーツはすべてtype:1(またはtype:2)である必要があり、その個数とレーン位置は束縛されません(未対応仕様)
- 上記に該当しないtypeの場合はendキーは使用しません(空の配列[]とします)

## index.jsonのフォーマット

基本的な構造としては、`index`キーが配列を持ちます。

```json
{
	"index": []
}
```

配列内の個々のオブジェクトが以下のキーと情報を持ちます。

|キー|内容|
|-|-|
|id|曲ID|
|name|楽曲名|
|artist|アーティスト名|
|bpm|譜面開始時のBPM値(Float)|
|dispbpm|選曲画面における表示上のBPM(String)|
|color|楽曲のテーマカラーのrgb値を順番に持つ配列 ex:`[0, 255, 255]`|
|offset|譜面と楽曲のオフセット(ミリ秒)|
|raku|`-1`|
|easy|EASY譜面の難易度数値|
|normal|NORMAL譜面の難易度数値|
|hard|HARD譜面の難易度数値|
|extra|`-1`|
|author|譜面製作者の名前|
|comment|楽曲に対するコメント(選曲画面で表示)|
|demo|選曲画面におけるデモ音源の再生開始位置(ミリ秒)|
